# Task 16: aria-live 공지 플로우 시각화

## 📢 스크린 리더 공지 타임라인

### 시나리오: 3명의 플레이어, 3개의 판정

```
┌─────────────────────────────────────────────────────────────────┐
│                    판정 모달 열림                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
        🔊 aria-live="polite" (진행 상황)
        "판정 진행 상황: 1번째 판정, 총 3개 중"
                              ↓
        🔊 aria-live="polite" (판정 상태)
        "김철수의 판정 차례입니다. 주사위를 굴려주세요."
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  플레이어 1: 김철수                               │
│                  [🎲 주사위 굴리기]                               │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                    ⌨️ Enter 키 누름
                              ↓
        🔊 aria-live="polite" (굴림 중)
        "김철수이(가) 주사위를 굴리는 중입니다..."
                              ↓
                    ⏳ 애니메이션 (2초)
                              ↓
        🔊 aria-live="assertive" (결과 - 즉시 공지!)
        "판정 결과: 주사위 15, 보정치 +3, 최종 값 18, 성공"
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  결과: 성공 ✅                                    │
│                  [➡️ 다음 판정]                                  │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                    ⌨️ Enter 키 누름
                              ↓
        🔊 aria-live="polite" (진행 상황)
        "판정 진행 상황: 2번째 판정, 총 3개 중"
                              ↓
        🔊 aria-live="polite" (판정 상태)
        "이영희의 판정 차례입니다. 다른 플레이어가 주사위를 굴리는 중입니다."
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  플레이어 2: 이영희                               │
│                  [⏳ 대기 중...]                                  │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                (다른 플레이어가 주사위 굴림)
                              ↓
        🔊 aria-live="polite" (굴림 중)
        "이영희이(가) 주사위를 굴리는 중입니다..."
                              ↓
                    ⏳ 애니메이션 (2초)
                              ↓
        🔊 aria-live="assertive" (결과)
        "판정 결과: 주사위 8, 보정치 +2, 최종 값 10, 실패"
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  결과: 실패 ❌                                    │
│                  [➡️ 다음 판정]                                  │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                    ⌨️ Enter 키 누름
                              ↓
        🔊 aria-live="polite" (진행 상황)
        "판정 진행 상황: 3번째 판정, 총 3개 중"
                              ↓
        🔊 aria-live="polite" (판정 상태)
        "박민수의 판정 차례입니다. 주사위를 굴려주세요."
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  플레이어 3: 박민수 (마지막)                      │
│                  [🎲 주사위 굴리기]                               │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                    ⌨️ Enter 키 누름
                              ↓
        🔊 aria-live="polite" (굴림 중)
        "박민수이(가) 주사위를 굴리는 중입니다..."
                              ↓
                    ⏳ 애니메이션 (2초)
                              ↓
        🔊 aria-live="assertive" (결과)
        "판정 결과: 주사위 20, 보정치 +1, 최종 값 21, 대성공"
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                  결과: 대성공 ⭐                                  │
│                  [📖 이야기 진행]                                │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                    ⌨️ Enter 키 누름
                              ↓
                    모달 닫힘 (자동)
```

## 🎯 aria-live 전략

### aria-live="polite" (대부분의 업데이트)

**사용 위치:**
- 판정 진행 상황 업데이트
- 판정 전환 공지
- 주사위 굴림 시작 공지

**특징:**
- 현재 읽고 있는 내용을 방해하지 않음
- 현재 발화가 끝난 후 공지
- 사용자 경험을 부드럽게 유지

**코드:**
```typescript
<div className="sr-only" role="status" aria-live="polite" aria-atomic="true">
  {getJudgmentAnnouncement()}
</div>
```

### aria-live="assertive" (중요한 결과)

**사용 위치:**
- 주사위 결과 공지

**특징:**
- 즉시 공지, 다른 공지 중단
- 중요한 정보에만 사용
- 사용자의 주의를 즉시 끌어야 할 때

**코드:**
```typescript
<div className="sr-only" role="status" aria-live="assertive" aria-atomic="true">
  {getOutcomeAnnouncement()}
</div>
```

## 📊 공지 우선순위

```
┌─────────────────────────────────────────────────────────────┐
│  우선순위 1: aria-live="assertive"                           │
│  - 주사위 결과                                               │
│  - 즉시 공지, 다른 공지 중단                                 │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│  우선순위 2: aria-live="polite"                              │
│  - 판정 진행 상황                                            │
│  - 판정 전환                                                 │
│  - 주사위 굴림 시작                                          │
│  - 현재 발화 후 공지                                         │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│  우선순위 3: 일반 탐색                                        │
│  - aria-label                                                │
│  - 포커스 이동 시 읽기                                       │
│  - 사용자가 Tab 키로 탐색할 때                               │
└─────────────────────────────────────────────────────────────┘
```

## 🔄 상태별 공지 메시지

### Active 상태
```typescript
// 현재 플레이어인 경우
"김철수의 판정 차례입니다. 주사위를 굴려주세요."

// 다른 플레이어인 경우
"김철수의 판정 차례입니다. 다른 플레이어가 주사위를 굴리는 중입니다."
```

### Rolling 상태
```typescript
"김철수이(가) 주사위를 굴리는 중입니다..."
```

### Complete 상태
```typescript
// 성공
"김철수의 판정 결과: 주사위 15, 최종 값 18, 성공"

// 실패
"김철수의 판정 결과: 주사위 8, 최종 값 10, 실패"

// 대성공
"김철수의 판정 결과: 주사위 20, 최종 값 21, 대성공"

// 대실패
"김철수의 판정 결과: 주사위 1, 최종 값 4, 대실패"
```

## 🎨 시각적 vs 청각적 피드백

### 시각적 피드백 (일반 사용자)
```
┌─────────────────────────────────────┐
│  김철수                              │
│  판정 진행 중                        │
│                                     │
│  행동: 문을 부수려고 합니다          │
│                                     │
│  ┌─────────┐  ┌─────────┐          │
│  │ 근력 +3 │  │ DC 15   │          │
│  └─────────┘  └─────────┘          │
│                                     │
│  🎲 주사위 애니메이션                │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 주사위: 15                   │   │
│  │ 최종 값: 18                  │   │
│  │ ✅ 성공!                     │   │
│  └─────────────────────────────┘   │
│                                     │
│  [➡️ 다음 판정]                     │
└─────────────────────────────────────┘
```

### 청각적 피드백 (스크린 리더 사용자)
```
🔊 "판정 진행 상황: 1번째 판정, 총 3개 중"
🔊 "김철수의 판정 차례입니다. 주사위를 굴려주세요."
🔊 "김철수의 현재 판정"
🔊 "행동 내용: 문을 부수려고 합니다"
🔊 "능력치: 근력, 보정치 +3"
🔊 "난이도: 15"
🔊 "주사위 굴리기 버튼"
⌨️  Enter
🔊 "김철수이(가) 주사위를 굴리는 중입니다..."
⏳ 2초 대기
🔊 "판정 결과: 주사위 15, 보정치 +3, 최종 값 18, 성공"
🔊 "판정 결과"
🔊 "주사위 굴림 결과: 주사위 결과 15"
🔊 "최종 값: 18, 계산: 15 더하기 3"
🔊 "판정 결과: 성공"
🔊 "다음 판정으로 이동 버튼"
```

## 🧪 테스트 시나리오

### 시나리오 1: 빠른 연속 공지
```
문제: 사용자가 빠르게 다음 판정으로 이동할 때
해결: aria-live="polite" 사용으로 공지가 쌓이지 않고 최신 정보만 공지
```

### 시나리오 2: 중요한 결과 놓침
```
문제: 주사위 결과가 다른 공지에 묻힐 수 있음
해결: aria-live="assertive" 사용으로 즉시 공지
```

### 시나리오 3: 너무 많은 정보
```
문제: 모든 정보를 공지하면 너무 길어짐
해결: 핵심 정보만 공지, 상세 정보는 탐색 시 제공
```

## 📝 베스트 프랙티스

### ✅ DO (좋은 예)
```typescript
// 명확하고 간결한 메시지
"판정 결과: 주사위 15, 최종 값 18, 성공"

// 상태에 따른 적절한 메시지
if (isCurrentPlayer) {
  return "주사위를 굴려주세요.";
} else {
  return "다른 플레이어가 주사위를 굴리는 중입니다.";
}

// aria-atomic="true"로 전체 메시지 공지
<div aria-live="polite" aria-atomic="true">
  {message}
</div>
```

### ❌ DON'T (나쁜 예)
```typescript
// 너무 장황한 메시지
"현재 김철수 플레이어의 판정 차례입니다. 김철수 플레이어는 근력 능력치를 사용하여 난이도 15의 판정을 시도합니다..."

// 불필요한 정보
"버튼을 클릭하세요" // aria-label에 이미 있음

// aria-live 남용
<div aria-live="assertive"> // 모든 것을 assertive로
  {everySingleUpdate}
</div>
```

## 🎓 학습 포인트

### 1. aria-live 타이밍
- **polite**: 대부분의 업데이트 (90%)
- **assertive**: 중요한 결과만 (10%)
- **off**: 사용자가 직접 탐색할 정보

### 2. 메시지 설계
- 핵심 정보 우선
- 간결하고 명확하게
- 컨텍스트 제공

### 3. 사용자 경험
- 너무 많은 공지는 피로감
- 중요한 정보는 즉시 공지
- 탐색 가능한 상세 정보 제공

---

**참고:** 이 플로우는 실제 스크린 리더(NVDA, VoiceOver)로 테스트하여 검증해야 합니다.
